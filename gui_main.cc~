
#include <iostream>
#include "gui_main.h"
#include <fstream>
#include <string.h>
#include <gdkmm/screen.h>

#include <webkit2/webkit2.h>

using namespace std;

gui_main::gui_main()
: m_VPaned(Gtk::ORIENTATION_HORIZONTAL),
  m_box(Gtk::ORIENTATION_VERTICAL),
  m_addbox(Gtk::ORIENTATION_HORIZONTAL),
  button("Add")	
 
{
  set_title("Your RSS's");
  set_border_width(5);
  set_default_size(1270,768);
  maximize();

  Glib::RefPtr<Gdk::Screen> screen = Gdk::Screen::get_default(); 
  int width = screen->get_width(); 
  m_VPaned.set_position(width/2);
  
  
  web_view = WEBKIT_WEB_VIEW( webkit_web_view_new() ); 
  webview = Glib::wrap( GTK_WIDGET( (web_view) ) );
  
 
  webkit_web_view_load_uri(web_view,rsslist.get_news_link(0));
  
  m_VPaned.add1(rsslist);
  m_VPaned.add2(*webview);

  m_addbox.pack_start(m_entry, Gtk::PACK_EXPAND_WIDGET);
  m_addbox.pack_start(button,Gtk::PACK_SHRINK);
  m_box.pack_start(m_addbox,Gtk::PACK_SHRINK);
  m_box.pack_start(m_separator, Gtk::PACK_SHRINK, 12);
  m_box.pack_start(m_VPaned,Gtk::PACK_EXPAND_WIDGET);
  
  add(m_box);
  show_all();
  show_all_children();
  
  rsslist.signal_something().connect(sigc::mem_fun(on_click,&tracker::get_Index) );

  show_all_children();
}


